<div class="flex justify-between mb-3">
    <h1 class="primaryTxt font-semibold text-2xl leading-9"> {{'Average Cost Calculator'| translate }}</h1>
</div>

<div class="flex justify-start items-center space-x-4 rtl:space-x-reverse">
    <div class="w-[30%]">
        <label for="dateFrom" class="block mb-2 text-sm font-medium text-gray-900"> {{'Start Date'| translate }}</label>
        <input id="dateFrom" type="date" [(ngModel)]="dateFrom" required
            class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg p-2.5 w-full"
            (change)="onDateChange()">
    </div>
    <div class="w-[30%]">
        <label for="dateTo" class="block mb-2 text-sm font-medium text-gray-900"> {{'End Date'| translate }}</label>
        <input id="dateTo" type="date" [(ngModel)]="dateTo" required
            class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg p-2.5 w-full"
            (change)="onDateChange()">
    </div>
    <div class="mt-7 ml-2">
        <button class="p-3 font-medium text-xl rounded-lg" (click)="calculateAverage()"
            [disabled]="!dateFrom || !dateTo || isLoading" [ngClass]="{ 
                'bg-gray-100 text-gray-300': !dateFrom || !dateTo || isLoading, 
                'secondaryBg text-white': dateFrom && dateTo && !isLoading 
            }">
             {{'Calculate'| translate }}
        </button>
    </div>
</div>

<div *ngIf="isLoading || calculationComplete" class="mt-6 flex flex-col items-center">
    <div class="w-[75%] bg-gray-200 rounded-full h-4 mx-auto">
        <div class="secondaryBg h-4 rounded-full" [style.width.%]="progress"></div>
    </div>
    <!-- <p *ngIf="message" class="text-center mt-2 text-gray-600">{{message}}</p> -->
    <p *ngIf="successMessage" class="text-center mt-2 text-green-600">{{successMessage}}</p>
    <button *ngIf="calculationComplete"
        class="mt-4 px-4 py-2 font-medium text-sm rounded-lg bg-gray-200 text-white"
        (click)="dismiss()">
         {{'Dismiss'| translate }}
    </button>
</div>
<div *ngIf="errorMessage" class="mt-4 text-center text-red-600">
    {{errorMessage}}
</div>