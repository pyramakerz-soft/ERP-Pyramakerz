<div class="container mx-auto px-4 py-6">
  <div class="flex justify-between items-center mb-4">
    <h2 class="text-2xl font-semibold">Item Card</h2>
  </div>

  <!-- Form -->
  <form class="grid grid-cols-1 md:grid-cols-5 gap-4 mb-6" (ngSubmit)="loadReport()">
    <div>
      <label class="block text-sm font-medium mb-1">Store ID</label>
      <select class="w-full border rounded px-3 py-2" [(ngModel)]="storeId" name="storeId" required>
        <option value="" disabled selected>Select Store</option>
        <option *ngFor="let store of stores" [value]="store.id">{{ store.name }}</option>
      </select>
    </div>

    <div>
      <label class="block text-sm font-medium mb-1">Item ID</label>
      <select class="w-full border rounded px-3 py-2" [(ngModel)]="shopItemId" name="shopItemId" required>
        <option value="" disabled selected>Select Item</option>
        <option *ngFor="let item of items" [value]="item.id">{{ item.name }}</option>
      </select>
    </div>

    <div>
      <label class="block text-sm font-medium mb-1">Date From</label>
      <input type="date" class="w-full border rounded px-3 py-2" [(ngModel)]="fromDate" name="fromDate" required>
    </div>

    <div>
      <label class="block text-sm font-medium mb-1">Date To</label>
      <input type="date" class="w-full border rounded px-3 py-2" [(ngModel)]="toDate" name="toDate" required>
    </div>

    <div class="flex items-end">
      <button type="submit" class="bg-blue-600 text-white w-full py-2 rounded hover:bg-blue-700">
        Apply
      </button>
    </div>
  </form>

  <!-- Tools -->
  <div class="flex flex-wrap justify-end gap-3 mb-4">
    <button class="bg-gray-600 text-white px-4 py-2 rounded hover:bg-gray-700" (click)="printPage()">
      ðŸ–°
    </button>
    <button class="bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700" (click)="exportToPDF()">
      ðŸ“„
    </button>
    <button class="bg-yellow-500 text-white px-4 py-2 rounded hover:bg-yellow-600" (click)="exportToExcel()">
      ðŸ“ƒ
    </button>
  </div>

  <!-- Table -->
  <div class="overflow-x-auto">
    <table class="min-w-full text-sm text-center border border-gray-200">
      <thead class="bg-gray-100">
        <tr>
          <th class="px-3 py-2 border">Date</th>
          <th class="px-3 py-2 border">Transaction Type</th>
          <th class="px-3 py-2 border">InvoiceNumber</th>
          <th class="px-3 py-2 border">The Authority</th>
          <th class="px-3 py-2 border">Outcome</th>
          <th class="px-3 py-2 border">Income</th>
          <th class="px-3 py-2 border">Balance</th>
        </tr>
      </thead>
      <tbody>
        <tr class="font-bold bg-green-100">
          <td colspan="4" class="border px-3 py-2">Total</td>
          <td class="border px-3 py-2">{{ summary.totalOut }}</td>
          <td class="border px-3 py-2">{{ summary.totalIn }}</td>
          <td class="border px-3 py-2">{{ summary.balance }}</td>
        </tr>
        <tr *ngFor="let t of filteredTransactions; let i = index" [ngClass]="i % 2 === 0 ? 'bg-white' : 'bg-blue-50'">
          <td class="border px-3 py-2">{{ t.dayDate | date: 'yyyy-MM-dd' }}</td>
          <td class="border px-3 py-2">{{ t.flagName }}</td>
          <td class="border px-3 py-2">{{ t.invoiceNumber }}</td>
          <td class="border px-3 py-2">{{ getSourceName(t) }}</td>
          <td class="border px-3 py-2">{{ t.totalOut }}</td>
          <td class="border px-3 py-2">{{ t.totalIn }}</td>
          <td class="border px-3 py-2">{{ t.balance }}</td>
        </tr>
      </tbody>
    </table>
  </div>
</div>
