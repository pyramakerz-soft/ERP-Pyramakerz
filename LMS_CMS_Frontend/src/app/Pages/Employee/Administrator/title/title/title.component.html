<div class="container mx-auto p-4">
    <!-- العنوان + البحث + زر الإضافة -->
    <div class="flex justify-between items-center mb-6">
        <h1 class="text-2xl font-semibold text-gray-800">
            {{ departmentName }} {{ 'Department' | translate }}
        </h1>
        <div class="flex items-center gap-4">
            <!-- شريط البحث -->
            <app-search [keysArray]="keysArray" (searchEvent)="onSearchEvent($event)"></app-search>

            <!-- زر إضافة عنوان جديد -->
            <button (click)="Create()"
                class="bg-orange-500 text-white px-4 py-3 rounded-lg hover:bg-orange-600 flex items-center gap-2 transition-colors">
                + {{ 'Create Title ' | translate }}
            </button>
        </div>
    </div>

    <!-- الجدول -->
    <div class="bg-white rounded-2xl shadow overflow-x-auto border border-[#BDBDBD]">
        <table class="w-full text-left">
            <thead class="bg-[#EBEBEB] text-sm md:text-base">
                <tr>
                    <th class="py-3 px-4 min-w-[120px] whitespace-nowrap border border-[#EAECF0] border-t-0 border-l-0">
                        {{ 'Department Title' | translate }}
                    </th>
                    <th class="py-3 px-4 min-w-[120px] whitespace-nowrap border border-[#EAECF0] border-t-0 border-l-0">
                        {{ 'Date' | translate }}
                    </th>
                    <th class="py-3 px-4 min-w-[120px] whitespace-nowrap border border-[#EAECF0] border-t-0 border-l-0">
                        {{ 'Actions' | translate }}
                    </th>
                </tr>
            </thead>
            <tbody>
                <!-- حالة ما فيش بيانات -->
                <tr *ngIf="TableData.length === 0">
                    <td colspan="3" class="text-center py-8 text-gray-500 h-[72px]">
                        {{ 'No Data Found' | translate }}
                    </td>
                </tr>

                <!-- البيانات -->
                <tr *ngFor="let row of TableData; let i = index"
                    [ngClass]="{ 'bg-[#F7F7F7]': i % 2 === 1, 'bg-white': i % 2 === 0 }" class="text-xs md:text-sm">
                    <td class="py-5 px-4 border border-[#EAECF0] border-t-0 border-l-0">
                        {{ row.name }}
                    </td>
                    <td class="py-5 px-4 border border-[#EAECF0] border-t-0 border-l-0">
                        {{ row.date | date:'mediumDate' }}
                    </td>
                    <td class="py-5 px-4 border border-[#EAECF0] border-t-0 border-l-0">
                        <div class="flex gap-4 rtl:space-x-reverse">
                            <!-- تعديل -->
                            <!-- تعديل -->
                            <button (click)="Edit(row)" class="text-[#5F6D7E] hover:text-[#4A5466] transition-colors">
                                <i class="fa-solid fa-pencil"></i>
                            </button>

                            <!-- حذف -->
                            <button (click)="Delete(row.id)"
                                class="text-[#5F6D7E] hover:text-[#4A5466] transition-colors">
                                <i class="fa-regular fa-trash-can"></i>
                            </button>

                        </div>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>
</div>

<!-- المودال (إضافة أو تعديل) -->
<div id="default-modal" tabindex="-1" aria-hidden="true" [ngClass]="{ 'hidden': !isModalVisible }"
    class="fixed top-0 left-0 right-0 z-50 flex justify-center items-center w-full h-full bg-black/50 overflow-y-auto overflow-x-hidden">
    <div class="relative bg-white w-[669px] rounded-2xl p-12 shadow-md">
        <!-- زر الإغلاق -->
        <button (click)="closeModal()" class="absolute top-4 right-4 text-gray-400 hover:text-gray-900 transition">
            <i class="fa-solid fa-xmark text-2xl"></i>
        </button>

        <!-- عنوان المودال -->
        <h1 *ngIf="mode === 'Create'" class="font-semibold text-2xl leading-9">
            {{ 'Create Title in' | translate }} {{ departmentName }}
        </h1>
        <h1 *ngIf="mode === 'Edit'" class="font-semibold text-2xl leading-9">
            {{ 'Edit Title in ' | translate }} {{ departmentName }}
        </h1>

        <!-- محتوى المودال -->
        <div class="mt-4 bg-[#F7F7F7] rounded-[24px] p-[16px_24px] gap-[20px]">
            <!-- اسم العنوان -->
            <h6 class="font-medium text-base leading-6">{{ 'Title Name' | translate }}</h6>
            <div class="mt-2">
                <input type="text"
                    class="w-[404px] h-[45px] rounded-lg border border-gray-300 px-3 focus:outline-none focus:border-orange-500"
                    [(ngModel)]="title.name" placeholder="{{ 'Enter title name' | translate }}"
                    (ngModelChange)="onInputValueChange({ field: 'name', value: $event })" />
                <span *ngIf="validationErrors['name']" class="text-red-500 text-sm ml-3">
                    {{ validationErrors['name'] }}
                </span>
            </div>

            <!-- التاريخ -->
            <!-- <h6 class="font-medium text-base leading-6 mt-6">{{ 'Date' | translate }}</h6>
      <div class="mt-2">
        <input type="date"
               class="w-[404px] h-[45px] rounded-lg border border-gray-300 px-3 focus:outline-none focus:border-orange-500"
               [(ngModel)]="title.date"
               (ngModelChange)="onInputValueChange({ field: 'date', value: $event })" />
        <span *ngIf="validationErrors['date']" class="text-red-500 text-sm ml-3">
          {{ validationErrors['date'] }}
        </span>
      </div> -->

            <!-- زر الحفظ -->
            <div class="mt-6">
                <button [disabled]="isLoading" (click)="CreateOREdit()"
                    class="bg-orange-500 text-white font-medium px-6 py-3 rounded-lg hover:bg-orange-600 transition disabled:opacity-50">
                    <span *ngIf="!isLoading">{{ 'Save' | translate }}</span>
                    <i *ngIf="isLoading" class="fas fa-spinner fa-spin"></i>
                </button>
            </div>
        </div>
    </div>
</div>