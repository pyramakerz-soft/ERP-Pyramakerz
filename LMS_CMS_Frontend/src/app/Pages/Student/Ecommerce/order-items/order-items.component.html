<div class="overlay" *ngIf="isDownloading">
  <div class="spinner"></div>
</div>

<div class="flex justify-between items-center">
    <div class="flex justify-between items-center space-x-5 rtl:space-x-reverse">
        <i class="fa-solid fa-chevron-left cursor-pointer" (click)="moveToOrders()"></i>
        <h1 class="primaryTxt font-semibold text-2xl leading-9">{{ 'Orders' | translate }}</h1>
    </div>
    <div class="flex justify-between items-center space-x-4 rtl:space-x-reverse">  
        <div class="py-2 px-3 border bg-[#F7F7F7] rounded cursor-pointer" (click)="goToCart()">
            <i class="fa-solid fa-cart-shopping text-[#919191]"></i>
        </div>

        <div class="py-2 px-3 border bg-[#F7F7F7] rounded cursor-pointer">
            <i class="fa-solid fa-gear secondaryTxt"></i>
        </div>
    </div>
</div> 

<div class="mt-8">
    <div id="OrderToDownload">
        <div class="p-2 bg-[#F7F7F7] rounded">
            <p class="text-base font-bold"> {{ 'Order Details' | translate }}</p>
        </div>
        <div *ngFor="let row of cart.cart_ShopItems; let i = index" [ngClass]="{
            'border-b pb-4': i != cart.cart_ShopItems.length - 1,
            'pt-4': i != 0,
            }"
            class="flex space-x-8 rtl:space-x-reverse mt-4">
            <div class="w-2/3 flex space-x-8 rtl:space-x-reverse">
                <div>
                    <p class="text-[#A9A9A9] text-sm font-medium"> {{ 'Qty' | translate }}</p>
                    <p class="font-medium text-base mt-1">X {{row.quantity}}</p>
                </div>
                <div class="flex space-x-2 rtl:space-x-reverse items-center">
                    <img class="rounded w-[50px] h-[50px]" [src]="row.mainImage" *ngIf="row.mainImage" crossorigin="anonymous">  
                    <div class="rounded w-[50px] h-[50px] bg-[#D9D9D9]" *ngIf="!row.mainImage"></div>
                    <p class="text-base font-semibold"><span *ngIf="row.shopItemColorID">{{row.shopItemColorName}}</span> {{row.shopItemEnName}} <span *ngIf="row.shopItemSizeID">({{row.shopItemSizeName}})</span></p>
                </div>
            </div>
            <div class="w-1/3 flex space-x-8 rtl:space-x-reverse">
                <div>
                    <p class="text-[#A9A9A9] text-sm font-medium"> {{ 'Cost' | translate }}</p>
                    <p class="font-medium text-base mt-1">{{row.salesPrice}}{{ 'SAR' | translate }}</p>
                </div>
                <div>
                    <p class="text-[#A9A9A9] text-sm font-medium"> {{ 'Total' | translate }}</p>
                    <p class="font-medium text-base mt-1">{{row.salesPrice * row.quantity}} {{ 'SAR' | translate }}</p>
                </div>
            </div>
        </div>
    
        <div class="w-1/3 mt-8"> 
            <div class="p-2 bg-[#F7F7F7] rounded">
                <p class="text-base font-bold"> {{ 'Order Summary' | translate }}</p>
            </div>
            <div class="p-6">
                <div class="flex justify-between mb-6">
                    <p class="text-[#A9A9A9] text-sm font-medium"> {{ 'Sub Total' | translate }}</p>
                    <p class="text-[#1E1E1E] text-sm font-medium">{{totalSalesPrices}} {{ 'SAR' | translate }}</p>
                </div>
                <div class="flex justify-between mb-6">
                    <p class="text-[#A9A9A9] text-sm font-medium"> {{ 'Total Vat' | translate }}</p>
                    <p class="text-[#1E1E1E] text-sm font-medium">{{totalVat}} {{ 'SAR' | translate }}</p>
                </div>
                <div class="flex justify-between">
                    <p class="text-[#1E1E1E] text-base font-bold"> {{ 'Total' | translate }}</p>
                    <p class="secondaryTxt text-base font-bold">{{cart.totalPrice}} {{ 'SAR' | translate }}</p>
                </div>
            </div>
        </div>
    </div>  

    <button *ngIf="order.orderStateID != 3" class="secondaryBg text-white py-3 px-20 rounded-lg mt-8" (click)="CancelOrder()"> {{ 'Cancel Order' | translate }}</button>
    <span *ngIf="order.orderStateID == 3" class="bg-gray-700 text-white py-3 px-20 rounded-lg mt-8"> {{ 'Order Canceled' | translate }}</span>
</div>  