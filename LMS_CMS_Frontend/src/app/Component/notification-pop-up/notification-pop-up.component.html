<div class="fixed inset-0 z-50 w-full h-full bg-black/50 flex items-center justify-end">
    <div class="bg-white rounded-md p-6 w-[27%] h-auto max-h-[90vh] overflow-y-auto mr-5">
       <div class="flex justify-end mb-5"> 
           <p (click)="DismissAll()" class="text-gray-500 text-sm hover:text-gray-700 transition border-b cursor-pointer">Dismiss All</p>
       </div>
       <ul>
           <li *ngFor="let notification of notifications; let i = index" class="cursor-pointer" (click)="viewNotification(notification)"> 
               <div class="bg-[#F0F1F5] hover:bg-gray-100 p-3 mb-3 flex flex-wrap justify-between items-start"> 
                    <div class="flex items-start w-[75%]">
                        <div class="flex-shrink-0">
                            <img src="Images/person-dummy.jpg" class="cursor-pointer rounded-full w-14" alt="Profile Photo">
                        </div>
                        <div class="ml-4 text-start w-full"> 
                            <p *ngIf="notification.insertedByUserName" class="primaryTxt text-sm"><span class="font-semibold">{{ notification.insertedByUserName }}</span> Notifed You</p>
                            <div class="mt-4 flex flex-col space-y-3">
                                <div *ngIf="notification.text" class="w-full border-l-4 border-gray-300 pl-4 primaryTxt text-base leading-relaxed truncate overflow-hidden whitespace-nowrap">
                                    {{notification.text}}
                                </div> 
                                <div *ngIf="notification.imageLink" class="flex space-x-2 items-center">
                                    <img src="Images/Icon frame.png" class="border p-[4px] w-10 rounded-md" alt="Photo">
                                    <span class="primaryTxt text-sm font-semibold">{{getImageName(notification.imageLink)}}</span>
                                </div> 
                                <div *ngIf="notification.link" class="secondaryTxt text-sm font-semibold">        
                                    <a [href]="notification.link" class="border-b border-[#089B41] hover:text-[#089b408c]"
                                        target="_blank" (click)="$event.stopPropagation(); LinkOpened(notification.id)"
                                        rel="noopener"> <!-- Prevents the new tab from having access to the original page via window.opener -->
                                        View Link
                                    </a>                                    
                                </div> 
                            </div>
                            <p class="text-[#BDBDBD] text-sm font-semibold mt-2">{{ formatInsertedAt(notification.insertedAt) }}</p>
                        </div>
                    </div>
                    <div *ngIf="notification.isAllowDismiss || notification.isLinkOpened" class="flex justify-end">
                        <button (click)="$event.stopPropagation(); close(notification.id)" type="button" class="text-gray-500 hover:text-gray-600 font-bold text-xl"><i class="fa-solid fa-xmark"></i></button>
                    </div>
               </div>
           </li>
       </ul> 
   </div>
</div>


<div id="NotificationModalForSideNotifications" class="fixed inset-0 z-[9999] justify-center items-center w-full h-full bg-black/50 backdrop-blur-sm hidden overflow-x-hide">
    <div class="bg-white rounded-2xl p-5 w-1/3 max-h-[75vh] overflow-y-auto overflow-x-hide"> 
        <div *ngIf="notificationByID.isAllowDismiss || notificationByID.isLinkOpened" class="flex justify-end">  
            <button (click)="closeNotificationModal()" type="button" class="text-gray-500 hover:text-gray-600 font-bold text-xl"><i class="fa-solid fa-xmark"></i></button>
        </div>
        
        <div *ngIf="!notificationByID" class="flex justify-center items-center h-32">
            <i class="fas fa-spinner fa-spin text-2xl"></i>
        </div>

        <div class="flex p-3 items-start max-w-full overflow-y-auto overflow-x-hide">
            <div class="flex-shrink-0">
                <img src="Images/person-dummy.jpg" class="cursor-pointer rounded-full w-14" alt="Profile Photo">
            </div>
            <div class="ml-4 text-start"> 
                <p *ngIf="notificationByID.insertedByUserName" class="primaryTxt text-sm"><span class="font-semibold">{{ notificationByID.insertedByUserName }}</span> Notifed You</p>
                <div class="mt-4 flex flex-col space-y-3 ">
                    <div *ngIf="notificationByID.imageLink" class="flex space-x-2 items-center"> 
                        <img [src]="notificationByID.imageLink" class="w-[200px] object-cover rounded-md"> 
                    </div> 
                    <div *ngIf="notificationByID.link" class="secondaryTxt text-sm font-semibold">        
                        <a [href]="notificationByID.link" class="border-b border-[#089B41] hover:text-[#089b408c]"
                        target="_blank" (click)="LinkOpened(notificationByID.id)"
                        rel="noopener"> <!-- Prevents the new tab from having access to the original page via window.opener -->
                        View Link
                        </a>                                    
                    </div> 
                    <div *ngIf="notificationByID.text" class="w-full border-l-4 border-gray-300 pl-4 primaryTxt text-base">
                        <p class="break-words">
                            {{notificationByID.text}}
                        </p>
                    </div> 
                </div>
                <p class="text-[#BDBDBD] text-sm font-semibold mt-2">{{ formatInsertedAt(notificationByID.insertedAt) }}</p>
            </div>
        </div>
    </div>
</div>
